{% extends "base.html" %}

{% block content %}

{% if page.toc | length > 1 %}
<aside>
  <div class="toc">
    <ol>
      {% for h1 in page.toc %}
      <li>
        <a href="{{h1.permalink | safe}}">{{ h1.title }}</a>
        {% if h1.children %}
        <ol>
          {% for h2 in h1.children %}
          <li>
            <a href="{{h2.permalink | safe}}">{{ h2.title }}</a>
          </li>
          {% endfor %}
        </ol>
        {% endif %}
      </li>
      {% endfor %}
    </ol>
  </div>
</aside>
{% endif %}

{% if page.toc | length == 1 %}
<article class="lonely">
{% else %}
<article>
{% endif %}
  <header>
    <h1 class="title">
      {{ page.title }}
    </h1>
    {% if page.date %}
    <p class="subtitle">
      Published on {{ page.date | date(format="%Y-%m-%d") }}
    </p>
    {% endif %}
  </header>

  <p>{{ page.content | safe }}</p>
</article>
{% endblock content %}