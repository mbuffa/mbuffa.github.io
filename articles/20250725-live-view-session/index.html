<html lang="en">

<head>
  <meta charset="UTF-8">
  

  
  <title>Elixir: Having multiple Live Views on the same page</title>
  

  
  
  

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;700&display=swap"
    rel="stylesheet">

  <link class="stylesheet" rel="stylesheet" href="/main.css" />
  <link class="stylesheet" rel="stylesheet" href="/dark.css" />

  <meta name="description" content="How to leverage Live Session for complex structures" />
</head>

<body class="stylesheet-mode" onload="loadActiveStylesheet()">
  <script type="text/javascript">
    function getStylesheetModeTags() {
      return document.getElementsByClassName("stylesheet-mode");
    }

    function getStylesheetTogglerTags() {
      return document.getElementsByClassName("stylesheet-toggler");
    }

    function loadActiveStylesheet() {
      var activeStylesheet = localStorage.getItem("active-stylesheet");

      if (["dark", "light"].indexOf(activeStylesheet) == -1) {
        activeStylesheet = "dark";
      }

      var classes = "stylesheet-mode " + activeStylesheet;

      for (elem of getStylesheetModeTags()) {
        elem.setAttribute("class", classes);
      }

      updateGiscusStyle(activeStylesheet);
    }

    function getIconNameForMode(mode) {
      if (mode == "dark") {
        return "sunny";
      }
      return "moon";
    }

    function sendToIframe(iframe, message, url) {
      iframe.contentWindow.postMessage(message, url);
    }

    function sendToGiscus(message) {
      var iframe = document.querySelector("iframe.giscus-frame");

      // WORKAROUND:
      // If the iframe is loaded, we apply the new theme instantly.
      // If it's not, then we delay the loading, so that the default "dark"
      // theme won't override it once the iframe is loaded (on first page load).
      // SHORTCOMINGS:
      // This can display a dark Giscus inside a light page for a few seconds...
      // But it prevents displaying a broken form or duplicating the iframe.
      if (iframe) {
        sendToIframe(iframe, { giscus: message }, "https://giscus.app");
      } else {
        setTimeout(sendToGiscus, 3000, message)
      }
    }

    function updateGiscusStyle(mode) {
      var theme = mode == "dark" ? "dark" : "light";

      sendToGiscus({
        setConfig: {
          theme: theme
        }
      });
    }

    function switchStylesheets() {
      var activeMode = "dark";

      for (elem of getStylesheetModeTags()) {
        switch (elem.className) {
          case "stylesheet-mode dark":
            activeMode = "light";
            break;

          case "stylesheet-mode light":
            activeMode = "dark";
            break;

          default:
            activeMode = "dark";
            break;
        }

        elem.setAttribute("class", "stylesheet-mode " + activeMode);
      }

      localStorage.setItem("active-stylesheet", activeMode);
      updateGiscusStyle(activeMode);
    }
  </script>

  <script type="text/javascript">loadActiveStylesheet();</script>
  <div id='stars'></div>
  <div id='stars2'></div>
  <div id='stars3'></div>

  <main class="
      m-auto max-w-full h-screen overflow-y-scroll overflow-x-hidden
      text-black dark:text-white bg-blue-900 dark:bg-transparent
    ">
    <div class="w-228 max-w-screen m-auto p-4 bg-slate-200 dark:bg-transparent">
      <div class="
    sticky h-12 w-11/12 m-auto mt-4 mb-4 p-1 -top-px rounded-md
    bg-black bg-opacity-100 shadow-2xl
    dark:bg-black dark:bg-opacity-80 dark:shadow-transparent
">
  <nav class="h-full w-full relative">
    <ul
      class="w-full h-full m-auto p-0 flex flex-row flex-nowrap justify-center items-center list-none">
      
      
      <li>
        <a class="
            inline-block no-underline p-4 pt-1 pb-1 hover:no-underline border border-solid rounded-md border-transparent
            text-white hover:bg-white hover:text-black active:text-black
            dark:text-orange-500 dark:hover:bg-orange-500 dark:hover:text-neutral-900 dark:active:text-white"
          href="&#x2F;">Home</a>
      </li>
      
      <li>
        <a class="
            inline-block no-underline p-4 pt-1 pb-1 hover:no-underline border border-solid rounded-md border-transparent
            text-white hover:bg-white hover:text-black active:text-black
            dark:text-orange-500 dark:hover:bg-orange-500 dark:hover:text-neutral-900 dark:active:text-white"
          href="&#x2F;articles">Articles</a>
      </li>
      
      <li>
        <a class="
            inline-block no-underline p-4 pt-1 pb-1 hover:no-underline border border-solid rounded-md border-transparent
            text-white hover:bg-white hover:text-black active:text-black
            dark:text-orange-500 dark:hover:bg-orange-500 dark:hover:text-neutral-900 dark:active:text-white"
          href="&#x2F;demos">Demos</a>
      </li>
      
      <li>
        <a class="
            inline-block no-underline p-4 pt-1 pb-1 hover:no-underline border border-solid rounded-md border-transparent
            text-white hover:bg-white hover:text-black active:text-black
            dark:text-orange-500 dark:hover:bg-orange-500 dark:hover:text-neutral-900 dark:active:text-white"
          href="&#x2F;tags">Tags</a>
      </li>
      
      <li>
        <a class="
            inline-block no-underline p-4 pt-1 pb-1 hover:no-underline border border-solid rounded-md border-transparent
            text-white hover:bg-white hover:text-black active:text-black
            dark:text-orange-500 dark:hover:bg-orange-500 dark:hover:text-neutral-900 dark:active:text-white"
          href="&#x2F;contact">Contact</a>
      </li>
      
      <li class="ml-auto">
        <a class="
            inline-block no-underline p-1 hover:no-underline border border-solid rounded-md border-transparent
            text-white hover:bg-white hover:text-black active:text-black
          dark:text-orange-500 dark:hover:bg-orange-500 dark:hover:text-neutral-900 dark:active:text-white"
          onClick="switchStylesheets()">
          <ion-icon class="stylesheet-toggler inline-block dark:hidden"
            name="moon"></ion-icon>
          <ion-icon class="stylesheet-toggler hidden dark:inline-block"
            name="sunny"></ion-icon>
        </a>
      </li>
    </ul>
  </nav>
</div>

      <div class="
        w-11/12 m-auto mt-2 p-4
        flex justify-center
        flex-col flex-wrap
        lg:flex-row lg:flex-nowrap
        dark:bg-black dark:bg-opacity-60
    ">
        


<aside class="w-full lg:w-3/12">
  <div class="sticky flex top-50">
    <ol class="w-full m-0 pl-4 list-decimal">
      
      <li>
        
<a class="
    inline-block px-2 text-sm w-full underline hover:no-underline
  dark:text-orange-500 dark:hover:text-orange-500 dark:hover:bg-neutral-900"
  href="https://mbuffa.github.io/articles/20250725-live-view-session/#context" title="Context">
  Context
</a>

        
      </li>
      
      <li>
        
<a class="
    inline-block px-2 text-sm w-full underline hover:no-underline
  dark:text-orange-500 dark:hover:text-orange-500 dark:hover:bg-neutral-900"
  href="https://mbuffa.github.io/articles/20250725-live-view-session/#usage" title="Usage">
  Usage
</a>

        
      </li>
      
      <li>
        
<a class="
    inline-block px-2 text-sm w-full underline hover:no-underline
  dark:text-orange-500 dark:hover:text-orange-500 dark:hover:bg-neutral-900"
  href="https://mbuffa.github.io/articles/20250725-live-view-session/#example" title="Example">
  Example
</a>

        
      </li>
      
    </ol>
  </div>
</aside>



<article class="w-full lg:w-9/12 pt-1 pb-1 pl-4">

  <header class="text-center">
    <h1 class="text-2xl font-bold m-2 p-2">
      Elixir: Having multiple Live Views on the same page
    </h1>
    
    <p class="subtitle">
      Published on 2025-07-25
    </p>
    
    
    
<p class="max-w-fit m-auto">
  
  <a class="inline-block m-1 p-1 underline hover:no-underline"
    href="/tags/tutorial">
    tutorial
  </a>
  
  <a class="inline-block m-1 p-1 underline hover:no-underline"
    href="/tags/elixir">
    elixir
  </a>
  
  <a class="inline-block m-1 p-1 underline hover:no-underline"
    href="/tags/phoenix">
    phoenix
  </a>
  
  <a class="inline-block m-1 p-1 underline hover:no-underline"
    href="/tags/liveview">
    liveview
  </a>
  
</p>

    
  </header>

  

  

  

  <div class="markdown-content">
    <h2 id="context">Context</h2>
<p>In its early versions and up until v1.0, Phoenix LiveView has been designed to let you manage one LiveView at a time. But in a few cases, you'll need to be able to manage multiple Live Views, for either a complex dashboard, or even a navigation menu living on the side.</p>
<p>In my case, I had to implement a navigation bar in one of my projects, with a different class for the active element. Using a Live Component was not possible, because those can't be called from a regular (non-Live) template.</p>
<p>Although, since Live Views are GenServers, and therefore Processes, having one Process per user constantly running just for displaying a dynamic navigation bar isn't great. It would be much better to save those few kilobytes of RAM, and do the work with pure CSS and JS hooks, therefore offloading the logic to the client. But let's just consider we need two LiveViews sitting next to each other for our use case.</p>
<p>This is where <a href="https://hexdocs.pm/phoenix_live_view/Phoenix.LiveView.Router.html#live_session/3"><code>live_session/3</code></a> comes into play.</p>
<h2 id="usage">Usage</h2>
<p><code>live_session/3</code> is a Router-specific "word" (in the Router DSL) that lets you define a handful of things:</p>
<ul>
<li>A <code>name</code> to identify it</li>
<li>A <code>session</code> argument, in case you want to put a value in the connection (HTTP) Session</li>
<li>A <code>root_layout</code> argument, in case you want to override it (it may already be specified in your pipeline)</li>
<li>A <code>layout</code> argument, to specify a "partial view" that'll be rendered inside your root layout</li>
<li>An <code>on_mount</code> callback to specify a list of functions to call in order to update the socket</li>
</ul>
<h2 id="example">Example</h2>
<p>This is how my code looks like:</p>
<pre data-lang="elixir" style="background-color:#2b303b;color:#c0c5ce;" class="language-elixir "><code class="language-elixir" data-lang="elixir"><span style="color:#65737e;"># router.ex
</span><span>live_session </span><span style="color:#a3be8c;">:admin</span><span>,
</span><span>  </span><span style="color:#d08770;">on_mount: </span><span>{</span><span style="color:#ebcb8b;">SutoWeb</span><span>.</span><span style="color:#ebcb8b;">InitAssigns</span><span>, </span><span style="color:#a3be8c;">:admin</span><span>},
</span><span>  </span><span style="color:#d08770;">layout: </span><span>{</span><span style="color:#ebcb8b;">SutoWeb</span><span>.</span><span style="color:#ebcb8b;">Layouts</span><span>, </span><span style="color:#a3be8c;">:&quot;live.admin&quot;</span><span>} </span><span style="color:#b48ead;">do
</span><span>  scope &quot;</span><span style="color:#a3be8c;">/admin</span><span>&quot;, </span><span style="color:#ebcb8b;">SutoWeb</span><span>.</span><span style="color:#ebcb8b;">Admin </span><span style="color:#b48ead;">do
</span><span>    pipe_through </span><span style="color:#a3be8c;">:admin
</span><span>    live &quot;</span><span style="color:#a3be8c;">/</span><span>&quot;, </span><span style="color:#ebcb8b;">IndexLive
</span><span>  </span><span style="color:#b48ead;">end
</span><span style="color:#b48ead;">end
</span></code></pre>
<pre data-lang="elixir" style="background-color:#2b303b;color:#c0c5ce;" class="language-elixir "><code class="language-elixir" data-lang="elixir"><span style="color:#65737e;"># init_assigns.ex
</span><span style="color:#b48ead;">defmodule </span><span style="color:#ebcb8b;">SutoWeb</span><span>.</span><span style="color:#ebcb8b;">InitAssigns </span><span style="color:#b48ead;">do
</span><span>  </span><span style="color:#b48ead;">import </span><span style="color:#ebcb8b;">Phoenix</span><span>.</span><span style="color:#ebcb8b;">Component
</span><span>
</span><span>  </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_mount</span><span>(</span><span style="color:#a3be8c;">:admin</span><span>, _params, _session, socket) </span><span style="color:#b48ead;">do
</span><span>    current_page =
</span><span>      </span><span style="color:#b48ead;">case </span><span style="color:#ebcb8b;">Atom</span><span>.to_string(socket.view) </span><span style="color:#b48ead;">do
</span><span>        &quot;</span><span style="color:#a3be8c;">Elixir.SutoWeb.Admin.AuthLive</span><span>&quot; &lt;&gt; _rest -&gt;
</span><span>          </span><span style="color:#a3be8c;">:auth
</span><span>
</span><span>        &quot;</span><span style="color:#a3be8c;">Elixir.SutoWeb.Admin.ChannelLive</span><span>&quot; &lt;&gt; _rest -&gt;
</span><span>          </span><span style="color:#a3be8c;">:channels
</span><span>
</span><span>        &quot;</span><span style="color:#a3be8c;">Elixir.SutoWeb.Admin.TimerLive</span><span>&quot; &lt;&gt; _rest -&gt;
</span><span>          </span><span style="color:#a3be8c;">:timers
</span><span>
</span><span>        ...
</span><span>      </span><span style="color:#b48ead;">end
</span><span>
</span><span>    {</span><span style="color:#a3be8c;">:cont</span><span>, assign(socket, </span><span style="color:#a3be8c;">:current_page</span><span>, current_page)}
</span><span>  </span><span style="color:#b48ead;">end
</span><span style="color:#b48ead;">end
</span></code></pre>
<pre data-lang="elixir" style="background-color:#2b303b;color:#c0c5ce;" class="language-elixir "><code class="language-elixir" data-lang="elixir"><span style="color:#65737e;"># Partial layout
</span><span>&lt;div class=&quot;</span><span style="color:#a3be8c;">min-h-screen h-full flex flex-row bg-gray-300</span><span>&quot;&gt;
</span><span>  &lt;.live_component
</span><span>    module={</span><span style="color:#ebcb8b;">SutoWeb</span><span>.</span><span style="color:#ebcb8b;">Admin</span><span>.</span><span style="color:#ebcb8b;">NavLive</span><span>}
</span><span>    id=&quot;</span><span style="color:#a3be8c;">nav</span><span>&quot;
</span><span>    class=&quot;</span><span style="color:#a3be8c;">p-5</span><span>&quot;
</span><span>    current_page={assigns.current_page}
</span><span>  /&gt;
</span><span>  &lt;main class=&quot;</span><span style="color:#a3be8c;">p-5 w-full h-screen overflow-auto</span><span>&quot;&gt;
</span><span>    &lt;.flash_group flash={@</span><span style="color:#bf616a;">flash</span><span>} /&gt;
</span><span>    {@</span><span style="color:#bf616a;">inner_content</span><span>}
</span><span>  &lt;/main&gt;
</span><span>&lt;/div&gt;
</span></code></pre>
<p>And the <code>NavLive</code> module here is just a navigation bar built with <a href="https://petal.build/">Petal Framework</a>, defining list items and picking the right Tailwind class for the active item.</p>
<p>That's it :) Please keep in mind that using a Live Session for something that could be offloaded to the client (with JavaScript and hooks) isn't great, but this gives you an idea on what structure to use, in case you're building a complex trading dashboard, and you absolutely need to have separate LiveViews on the same page, for concurrency reasons or resilience.</p>

  </div>

  
  <script src="https://giscus.app/client.js"
    data-repo="mbuffa/mbuffa.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnkyNDYzOTIyNjU="
    data-category="Announcements" data-category-id="DIC_kwDODq-lyc4CAZ1r"
    data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0"
    data-theme="dark" data-lang="en" crossorigin="anonymous" async>
    </script>
  
</article>

      </div>

      <footer class="mt-20 p-4 text-center text-xs font-normal">
  <span>
    Written by Maxime Buffa with <a class="dark:text-orange-500 dark:hover:text-orange-500 dark:hover:bg-neutral-900"
      href="https://www.getzola.org/" target="_blank">Zola</a> and <a
      class="dark:text-orange-500 dark:hover:text-orange-500 dark:hover:bg-neutral-900" href="https://tailwindcss.com/"
      target="_blank">Tailwind</a>
  </span>
</footer>
    </div>
    <!-- Fix to avoid scrolling "under the overflow break" when using a ToC link.
    <br>
  </main>

  <!-- Heap Analytics loader -->
    <script type="text/javascript">
      window.heap = window.heap || [], heap.load = function (e, t) { window.heap.appid = e, window.heap.config = t = t || {}; var r = document.createElement("script"); r.type = "text/javascript", r.async = !0, r.src = "https://cdn.heapanalytics.com/js/heap-" + e + ".js"; var a = document.getElementsByTagName("script")[0]; a.parentNode.insertBefore(r, a); for (var n = function (e) { return function () { heap.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }, p = ["addEventProperties", "addUserProperties", "clearEventProperties", "identify", "resetIdentity", "removeEventProperty", "setEventProperties", "track", "unsetEventProperty"], o = 0; o < p.length; o++)heap[p[o]] = n(p[o]) };
      heap.load("4008293954");
    </script>
    <script
      src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.js"></script>
    <script type="module"
      src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
</body>

</html>